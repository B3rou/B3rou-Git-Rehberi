# 1.1 - Git'in Felsefesi ve Teorisi

> *"Git'i anlamadan kullanmak, bir uÃ§aÄŸÄ± sadece dÃ¼ÄŸmelerine basarak uÃ§urmaya benzer. Havada kalÄ±rsÄ±nÄ±z ama nedenini bilmezsiniz; ta ki motor durana kadar."*

Bu derste terminale komut girmeyeceÄŸiz. Bunun yerine, Git'in beyninin iÃ§ine gireceÄŸiz. Ã‡oÄŸu kiÅŸinin yaÅŸadÄ±ÄŸÄ± kafa karÄ±ÅŸÄ±klÄ±ÄŸÄ±nÄ±n (Ã¶zellikle Merge Conflict ve Detached HEAD durumlarÄ±nda) temel sebebi, bu teorik altyapÄ±nÄ±n eksikliÄŸidir.

---

## 1. BÃ¼yÃ¼k AyrÄ±m: Delta vs. Snapshot

Eski versiyon kontrol sistemleri (SVN, CVS), veriyi **"Farklar" (Delta)** olarak saklardÄ±. Yani sadece deÄŸiÅŸen satÄ±rlarÄ± tutarlardÄ±.
* *Versiyon 1:* Dosya A (Orijinal)
* *Versiyon 2:* Dosya A'nÄ±n 3. satÄ±rÄ± deÄŸiÅŸti.
* *Versiyon 3:* Dosya A'nÄ±n 5. satÄ±rÄ± silindi.

Git bÃ¶yle Ã§alÄ±ÅŸmaz. Git, bir **Mini Dosya Sistemi** gibi Ã§alÄ±ÅŸÄ±r.

### Git'in YÃ¶ntemi: Snapshot (AnlÄ±k GÃ¶rÃ¼ntÃ¼)
Sen her `commit` attÄ±ÄŸÄ±nda, Git projenin o anki halinin **tam bir fotoÄŸrafÄ±nÄ±** Ã§eker ve saklar.



* **Soru:** "Her commit'te tÃ¼m projeyi kopyalÄ±yorsa diskim dolmaz mÄ±?"
* **Cevap:** HayÄ±r! Git Ã§ok zekidir (Content-Addressable Filesystem). EÄŸer bir dosya deÄŸiÅŸmediyse (Ã¶rneÄŸin `logo.png`), Git onu tekrar kopyalamaz. Sadece Ã¶nceki versiyondaki dosyaya bir **link (pointer)** atar. VeritabanÄ±nda aynÄ± veriden asla iki tane olmaz.

> [!NOTE]
> **Neden Ã–nemli?**
> Bu mimari sayesinde Git, 10 yÄ±l Ã¶nceki bir branch'e geÃ§iÅŸ yaparken (checkout) saniyeler iÃ§inde tÃ¼m projeyi o ana dÃ¶ndÃ¼rebilir. Hesaplama yapmaz, sadece o anki "fotoÄŸrafÄ±" yÃ¼kler.

---

## 2. Her Åeyin Bir KimliÄŸi Var: SHA-1

Git veritabanÄ±nda (yani `.git` klasÃ¶rÃ¼nde) dosyalar isimleriyle deÄŸil, iÃ§erikleriyle saklanÄ±r. Git, dosyanÄ±n iÃ§eriÄŸini alÄ±r ve karmaÅŸÄ±k bir matematiksel iÅŸlemden geÃ§irerek ona 40 karakterlik benzersiz bir isim verir.

Buna **SHA-1 Hash** denir.

```text
24b9da6552252987aa493b52f8696cd6d3b00373
```

* **GÃ¼venlik:** Kodun iÃ§inde tek bir boÅŸluk bile deÄŸiÅŸse, bu Hash tamamen deÄŸiÅŸir.
* **BÃ¼tÃ¼nlÃ¼k:** Git'te veriyi bozup (corrupt) fark edilmemek imkansÄ±zdÄ±r.
* **Referans:** "Versiyon 2" diye bir ÅŸey yoktur. "24b9da ile baÅŸlayan commit" vardÄ±r.

### ğŸ”— Zincirleme Reaksiyon (The Chain of Trust)

Git'teki her commit, sadece kendi verisini tutmaz; aynÄ± zamanda **kendisinden Ã¶nceki commit'in (Parent)** kimliÄŸini de tutar. TÄ±pkÄ± bir Blockchain gibi.

* **Commit C:** "Benim babam Commit B" der.
* **Commit B:** "Benim babam Commit A" der.

> [!WARNING]
> **Kelebek Etkisi:**
> GeÃ§miÅŸteki "Commit A"nÄ±n iÃ§indeki tek bir harfi deÄŸiÅŸtirirseniz, onun SHA-1 kimliÄŸi deÄŸiÅŸir.
> 1. A deÄŸiÅŸince, B'nin babasÄ± deÄŸiÅŸmiÅŸ olur -> B'nin Hash'i deÄŸiÅŸir.
> 2. B deÄŸiÅŸince, C deÄŸiÅŸir...

<details>
<summary>ğŸ•µï¸â€â™‚ï¸ <b>MeraklÄ±sÄ±na: SHA-1 NasÄ±l HesaplanÄ±r? (Git'in Gizli FormÃ¼lÃ¼)</b></summary>

Git, bir dosyanÄ±n Hash'ini hesaplarken sadece dosya iÃ§eriÄŸini kullanmaz. Ä°Ã§eriÄŸin baÅŸÄ±na Ã¶zel bir <b>Header (BaÅŸlÄ±k)</b> ekler.

### Git'in MutfaÄŸÄ±:

Git'in uyguladÄ±ÄŸÄ± formÃ¼l ÅŸudur:

`sha1( "blob " + dosya_boyutu + "\0" + dosya_icerigi )`

Bu karÄ±ÅŸÄ±mÄ± SHA-1 fonksiyonuna sokar ve Ã§Ä±kan 40 karakterlik sonucu o dosyanÄ±n ismi yapar.

### Terminal LaboratuvarÄ±

> **Windows KullanÄ±cÄ±larÄ±:** <br>
> AÅŸaÄŸÄ±daki komutlar "byte" seviyesinde hassas olduÄŸu iÃ§in PowerShell'de Ã§alÄ±ÅŸmayabilir (PowerShell sona gizli satÄ±r/CRLF ekler). Bu deneyi yapmak iÃ§in **Git Bash** terminalini kullanmanÄ±z Ã¶nerilir.

Terminalini (Git Bash / Mac / Linux) aÃ§ ve Git'in hesaplamasÄ±nÄ± manuel yap:

```bash
# 1. Git'e soralÄ±m: Ä°Ã§inde sadece "test" yazan verinin hash'i ne?
echo -n "test" | git hash-object --stdin
# Ã‡Ä±ktÄ±: 30d74d258e505264db7f9d6757b0b1b4b96912b8

```

Åimdi aynÄ± iÅŸlemi Git olmadan, **OpenSSL** ve Git'in formÃ¼lÃ¼yle yapalÄ±m:

```bash
# 2. FormÃ¼lÃ¼ elle uyguluyoruz: "blob 4" + "Null Byte" + "test"
echo -n -e "blob 4\0test" | openssl sha1
# Ã‡Ä±ktÄ±: 30d74d258e505264db7f9d6757b0b1b4b96912b8

```

GÃ¶rdÃ¼n mÃ¼? SonuÃ§lar birebir aynÄ±! Ä°ÅŸte Git'in "sihri" aslÄ±nda bu basit matematiktir.

---

**âš ï¸ SHA-1 KÄ±rÄ±ldÄ± mÄ±?**
Evet, 2017'de Google, SHA-1'de Ã§arpÄ±ÅŸma (collision) bulmayÄ± baÅŸardÄ±. Ancak Git, verileri saklarken baÅŸÄ±na **tÃ¼r (blob) ve boyut** bilgisi eklediÄŸi iÃ§in (SHAttered saldÄ±rÄ±sÄ± PDF baÅŸlÄ±klarÄ±na dayanÄ±yordu), Git'in bu yapÄ±sÄ± Ã§arpÄ±ÅŸmayÄ± zorlaÅŸtÄ±rÄ±r. AyrÄ±ca **Commit objeleri**; zaman ve parent bilgisini de iÃ§erdiÄŸi iÃ§in taklit edilmeleri imkansÄ±za yakÄ±ndÄ±r.

Daha fazla detay iÃ§in: [Wikipedia SHA-1](https://tr.wikipedia.org/wiki/SHA-1)

</details>

---

## 3. Merkezi DeÄŸil, DaÄŸÄ±tÄ±k (Distributed)

Eski sistemlerde "Ana Kod" sunucuda dururdu. Sen sadece o anki dosyayÄ± indirip Ã§alÄ±ÅŸÄ±rdÄ±n. Ä°nternet kesilirse iÅŸ biterdi.

Git'te ise **herkes bir yedektir.**
Projeyi kendi bilgisayarÄ±na cloneladÄ±ÄŸÄ±n (indirdiÄŸin) an, projenin **1. gÃ¼nden bugÃ¼ne kadar olan tÃ¼m tarihÃ§esini, tÃ¼m versiyonlarÄ±nÄ± ve tÃ¼m veritabanÄ±nÄ±** indirirsin.

* **Senaryo:** YarÄ±n GitHub tamamen kapansa veya sunucular yansa ne olur?
* **SonuÃ§:** HiÃ§bir veri kaybolmaz. Senin (veya ekip arkadaÅŸÄ±nÄ±n) bilgisayarÄ±ndaki `.git` klasÃ¶rÃ¼, sunucudakinin birebir kopyasÄ±dÄ±r. Herhangi bir bilgisayardaki yedeÄŸi yeni bir sunucuya yÃ¼kleyip kaldÄ±ÄŸÄ±nÄ±z yerden devam edebilirsiniz.

> [!TIP]
> **GÃ¼Ã§ Sende:** Ä°nternetin yokken uÃ§akta, trende veya daÄŸ baÅŸÄ±nda kod yazabilir, commit atabilir, branch aÃ§abilir ve tarihÃ§ede gezebilirsin. Ã‡Ã¼nkÃ¼ sunucudaki dosyalarÄ±n birebir aynÄ±larÄ± artÄ±k **senin bilgisayarÄ±nÄ±n iÃ§inde**.

---

## 4. Kutsal ÃœÃ§leme: The Three States

Git'te bir dosya hayatÄ± boyunca Ã¼Ã§ farklÄ± alanda bulunur. Bu alanlarÄ± anlamak, `git add` ile `git commit` arasÄ±ndaki farkÄ± anlamanÄ±n anahtarÄ±dÄ±r.

### ğŸ  1. Working Directory (Ã‡alÄ±ÅŸma Dizini)

* **BurasÄ± senin masan.**
* DosyalarÄ± yarattÄ±ÄŸÄ±n, sildiÄŸin, kodlarÄ± yazdÄ±ÄŸÄ±n yer burasÄ±.
* Buradaki deÄŸiÅŸiklikler henÃ¼z Git'in umurunda deÄŸildir. Git burayÄ± "Kirli (Dirty)" alan olarak gÃ¶rÃ¼r.
* Yine de git, dosyalarÄ±n takibini yapmasa da deÄŸiÅŸtiÄŸini farkedebilir.
* Tekrar ediyorum; burasÄ± tÃ¼m ekle-Ã§Ä±karlarÄ±nÄ±zÄ± yaptÄ±ÄŸÄ±nÄ±z o eski dostunuz klasÃ¶rlerdir.

### ğŸ“¦ 2. Staging Area / Index (Sahneleme AlanÄ±)

* **BurasÄ± kargo paketleme masasÄ±.**
* Commit'lemeden (kargolamadan) Ã¶nce hangi dosyalarÄ± pakete koyacaÄŸÄ±nÄ± seÃ§tiÄŸin yer.
* `git add` komutu, dosyayÄ± masandan alÄ±p bu paketin iÃ§ine koyar.
* **Neden var?** Bazen 10 dosyada deÄŸiÅŸiklik yaparsÄ±n ama sadece 2'sini kaydetmek istersen hepsini deÄŸil, sadece istediklerini "sahneye" alÄ±rsÄ±n. BÃ¶ylece indexteki (sahnedeki) dosyalarÄ± bir bÃ¼tÃ¼n halinde imzalarsÄ±n.

### ğŸ›ï¸ 3. Repository / .git Directory (Depo)

* **BurasÄ± arÅŸiv odasÄ±.**
* `git commit` dediÄŸin an, Staging Area'daki paket mÃ¼hÃ¼rlenir, bir fotoÄŸrafÄ± Ã§ekilir (Snapshot) ve sonsuza kadar saklanmak Ã¼zere `.git` veritabanÄ±na kaldÄ±rÄ±lÄ±r.

> [!NOTE]
> `.git` klasÃ¶rÃ¼, projenizin tÃ¼m geÃ§miÅŸinin saklandÄ±ÄŸÄ± gizli bir klasÃ¶rdÃ¼r. 
> Bu klasÃ¶rÃ¼ gÃ¶rebilmek iÃ§in dosya yÃ¶neticinizden `gizli Ã¶ÄŸeleri gÃ¶ster` ayarÄ±nÄ± aktifleÅŸtirmeniz gerekebilir.

> [!TIP]
> **Metafor:**
> * **Working Directory:** Bir mektup yazÄ±yorsun. (KaÄŸÄ±t masada).
> * **Staging Area:** Mektubu zarfa koydun ve aÄŸzÄ±nÄ± yaladÄ±n. (HenÃ¼z postalamadÄ±n, hala deÄŸiÅŸtirebilirsin).
> * **Repository:** Mektubu posta kutusuna attÄ±n. (ArtÄ±k geri dÃ¶nÃ¼ÅŸ yok, o tarih oldu).

> [!WARNING]
> **Spoiler:** Ä°lerleyen derslerimizde bu postayÄ± kutusundan geri alÄ±p deÄŸiÅŸtirmeyi de Ã¶ÄŸreneceÄŸiz. 
> AyrÄ±ca sildiÄŸiniz commitlerin (resetleseniz bile) aslÄ±nda yok olmadÄ±ÄŸÄ±nÄ± ve geri dÃ¶ndÃ¼rÃ¼lebileceÄŸinin mÃ¼jdesini ÅŸimdiden verelim.

---

## âœ… Kontrol NoktasÄ±

Bu dersin iÃ§eriÄŸi eÄŸer tam oturmadÄ±ysa canÄ±nÄ± sÄ±kma, bu derslik kaÃ§Ä±rdÄ±ÄŸÄ±n detaylara daha sonra dÃ¶nÃ¼p bakabilirsin. Git'in Teori kÄ±smÄ±nÄ± anlamak, okumakla yetmeyecektir ancak zamanla oturacaktÄ±r. <br><br>
Kafanda ÅŸu kavramlar oturduysa terminalin baÅŸÄ±na geÃ§meye hazÄ±rsÄ±n:

1. Git, farklarÄ± deÄŸil **fotoÄŸraflarÄ± (Snapshot)** saklar.
2. Commitler birbirine zincirle baÄŸlÄ±dÄ±r, geÃ§miÅŸi deÄŸiÅŸtirmek zinciri kÄ±rar.
3. Kodun depoya girmeden Ã¶nce **Sahne (Staging)** denilen bir ara katmandan geÃ§er.

ArtÄ±k teori bitti. Ellerimizi kirletme vakti.

ğŸ‘‰ **Sonraki AdÄ±m:** [1.2 - Ä°lk Temas: Evreni Yaratmak](./1.2-ilk-commit.md)